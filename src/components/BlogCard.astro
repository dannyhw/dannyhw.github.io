---
import { Image } from "astro:assets";
import type { CollectionEntry } from "astro:content";
import FormattedDate from "./FormattedDate.astro";

interface Props {
  post: CollectionEntry<"blog">;
  lazyLoad: boolean;
}

const { post, lazyLoad } = Astro.props;
---

<li class="group w-full md:w-[calc(50%-1rem)]">
  <a class="blog-card-link cyber-card no-underline block" href={`/blog/${post.slug}/`}>
    {
      post.data.heroImage && (
        <div class="img-wrapper mb-3 overflow-hidden border" style="border-color: rgba(0,229,255,0.15);">
          <Image
            width={720}
            height={360}
            src={post.data.heroImage}
            loading={lazyLoad ? "lazy" : "eager"}
            alt=""
            class="aspect-video w-full object-cover transition-transform duration-500 group-hover:scale-105"
          />
        </div>
      )
    }

    <h4 class="m-0 mb-1 text-2xl transition-all group-hover:text-primary">
      {post.data.title}
    </h4>

    <p class="font-mono text-xs tracking-wider" style="color: rgba(0,229,255,0.4);">
      <span style="color: var(--neon-magenta); opacity: 0.7;">&gt;</span>
      <FormattedDate date={post.data.pubDate} />
    </p>
  </a>
</li>

<style>
  .blog-card-link {
    padding: 0.1em 0;
    display: block;
  }

  .blog-card-link:hover .img-wrapper {
    border-color: rgba(0, 229, 255, 0.45) !important;
    box-shadow:
      0 0 12px rgba(0, 229, 255, 0.15),
      0 0 30px rgba(0, 229, 255, 0.05);
  }
</style>
